<!-- pages/index/index.wxml -->
<view class="container">
  <!-- 加载中状态 -->
  <view class="loading-container" wx:if="{{loading && !shopInfo}}">
    <view class="loading">
      <view class="weui-loading"></view>
      <text>加载中...</text>
    </view>
  </view>

  <!-- 主内容区域 -->
  <block wx:else>
    <!-- 店铺信息区域 -->
    <view class="shop-info">
      <image class="shop-logo" src="{{shopInfo.logo || '/images/default_shop.png'}}" mode="aspectFill" binderror="imageError" data-type="shop"></image>
      <view class="shop-detail">
        <view class="shop-name">{{shopInfo.name || '扫码点餐'}}</view>
        <view class="shop-slogan">{{shopInfo.slogan || '欢迎使用扫码点餐系统'}}</view>
      </view>
    </view>
    
    <!-- 店铺简介区域 -->
    <view class="shop-description" wx:if="{{shopInfo.description}}">
      <text>{{shopInfo.description}}</text>
    </view>
    
    <!-- 餐厅基本信息 -->
    <view class="shop-info-detail" wx:if="{{shopInfo}}">
      <view class="info-item" wx:if="{{shopInfo.address}}">
        <text class="info-label">地址：</text>
        <text class="info-content">{{shopInfo.address}}</text>
      </view>
      <view class="info-item" wx:if="{{shopInfo.phone}}" bindtap="callPhone">
        <text class="info-label">电话：</text>
        <text class="info-content phone-text">{{shopInfo.phone}}</text>
      </view>
      <view class="info-item" wx:if="{{shopInfo.businessHours}}">
        <text class="info-label">营业时间：</text>
        <text class="info-content">{{shopInfo.businessHours}}</text>
      </view>
    </view>
    
    <!-- 桌号扫描区域 -->
    <view class="scan-area">
      <view class="section-title">桌号扫描 (可选)</view>
      <view class="scan-content">
        <view class="scan-status {{scanStatus.hasScan ? 'scanned' : ''}}">
          <text wx:if="{{scanStatus.hasScan}}">{{scanStatus.tableInfo}}</text>
          <text wx:else>扫描桌号可提供更好的服务体验</text>
        </view>
        <view class="scan-btn" bindtap="scanTable">
          <text>扫描桌号</text>
        </view>
      </view>
    </view>
    
    <!-- 底部点餐按钮 -->
    <view class="go-order-btn-wrapper">
      <view class="go-order-btn" bindtap="goToOrder" hover-class="btn-hover">
        <text class="btn-text">{{scanStatus.hasScan ? '桌号' + scanStatus.tableId + ' 去点餐' : '去点餐'}}</text>
      </view>
    </view>
  </block>
</view> 